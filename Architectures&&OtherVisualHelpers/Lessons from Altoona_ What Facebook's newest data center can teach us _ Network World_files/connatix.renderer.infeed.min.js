(function (d) {
    function sendLog(queryString){
        if (d.cnxDlog) {
            var img = d.createElement('img');
                img.style = 'width:1px;height:1px';
                img.src = 'https://trk.connatix.com/l?'+queryString+'&cb='+Date.now();
                d.head.appendChild(img); 
        }
    }
    d.cnxLoaderCnt = d.cnxLoaderCnt || 0;
    try {
        var log;

        try{
            log = window.top.document.location.href.indexOf('dailydot') > -1;
        }
        catch(e){
            log = d.location.href.indexOf('dailydot') > -1;
        }
        
        try{
            if (window.context && window.context.sourceUrl && window.context.sourceUrl.indexOf('dailydot') > -1) {
            log = true;
            }   
            if(window.context && window.context.location && window.context.location.href && window.context.location.href.indexOf('dailydot') > -1 ) {
                log = true;
            }
        }
        catch(e){}
        
        if (log && !d.cnxDlog) {
            d.cnxDlog = true;
            sendLog('m1=dailydot&v=1427');
        }
        if(log){
            sendLog('m1=dailydot_all&v=1427');  
        }
    } catch(e) {}

    function getVersion() {
        return 100 / 100 > Math.random() ? 1427 : 1427;
    }

    var createIframe = function (p) {
        var nEl = d.createElement('iframe');
        nEl.id = 'cnx_' + d.cnxLoaderCnt;
        d.cnxLoaderCnt++;
        nEl.src = 'javascript:false';
        nEl.marginWidth = '0';
        nEl.marginHeight = '0';
        nEl.frameBorder = '0';
        nEl.width = '1px';
        nEl.height = '1px';

        nEl.setAttribute('SCROLLING', 'NO');
        var loaded  = false;
        var loadTimeout = setTimeout(function(){
            if(!loaded){
                sendLog('m1=ifr_loader_timeout&v=1427');  
            }
        },2000);
        p.appendChild(nEl);
        var doc = nEl.contentWindow && nEl.contentWindow.document;
        doc.open()._load = function () {
            try {
                loaded = true;
                clearTimeout(loadTimeout);
                var s = doc.createElement('script');
                s.src = "//cdns.connatix.com/p/" + getVersion() + "/min/connatix.renderer.infeed.min_dc.js";
                s.setAttribute('async', '1');
                s.setAttribute('type', 'text/javascript');
                doc.body.appendChild(s);
                sendLog('m1=dailydot_loaderInsertedScript&v=1427');  
          } catch(e) {
                sendLog('m1=dailydot_loaderLoadError&v=1427');  
          }

        };
        doc.write('<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"><title></title></head><body onload=\"document._load()\"></body></html>');
        doc.close();
        return nEl;
    };
    try {
        createIframe(d.head);
    } catch(e) {
        sendLog('m1=dailydot_loaderCreateError&v=1427');  
    }
})(document);
            